mod application;

class Start {

    var x;

    static fn foo(var[] message) {
        __asm(
            "movl 0"
        );
        __asm(
            "test/print.asm"
        );
    }

    Start() {
        __asm(
            "odessy/constructor_call.asm"
        );
    }

    fn mult(var x) : var {
        return (10*x)/2;
        __asm(
            "movr %adx,%fp"
            "smov %ebx+1"
            "put %ebx"
            "ret"
        );
    }

    static fn __init(var[] args) {
        var[] message = "I called foo!\n";
        Start start;
        __asm(
            "odessy/function_call.asm"
        );

        __asm(
            "movl <start>"            // start = new Start();
            "iframe"
            "pushref"
            "movn 0"
            "movi #5,%ebx"
            "movi #0,%adx "
            "movx %ebx,%adx"
            "pushr %ebx"
            "call <mult>"
        );

        __asm("ret");
    }
}